<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Header</title>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
		<style>
			body {
				padding-top: 60px;
			}

			.dropdown-item.active,
			.dropdown-item:active {
				background-color: #212529;
			}

			/* Cập nhật styles cho header */
			.navbar-brand {
				display: flex;
				align-items: center;
				gap: 10px;
			}

			.navbar-brand img {
				height: 32px;
				/* Điều chỉnh chiều cao logo */
				width: auto;
				object-fit: contain;
			}

			.logo {
				width: 40px;
				height: 40px;
				background-color: #4267B2;
				/* Màu nền xanh Facebook */
				color: white;
				/* Màu chữ trắng */
				font-weight: bold;
				font-size: 24px;
				text-align: center;
				line-height: 40px;
				border-radius: 0;
				/* Vuông góc */
				display: inline-block;
			}


			/* Fix cho responsive */
			@media (max-width: 576px) {
				.navbar-brand img {
					height: 28px;
					/* Giảm kích thước logo trên mobile */
				}
			}

			/* Fix cho dropdown trên mobile */
			@media (max-width: 991.98px) {
				.navbar-nav .dropdown-menu {
					position: static;
					float: none;
				}
			}

			/* Đảm bảo dropdown hiển thị đúng trên desktop */
			@media (min-width: 992px) {
				.dropdown:hover .dropdown-menu {
					display: block;
					margin-top: 0;
				}
			}
		</style>
	</head>
	<body>
		<header class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
			<nav class="container-fluid">
				<a class="navbar-brand" href="#">
					<div class="logo">{{ app_name[0]|upper }}</div>
					<span class="app-title">{{ app_name }}</span>
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item">
							<a class="nav-link" href="/">Home</a>
						</li>

						<!-- Facebook Dropdown -->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="facebookDropdown" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Facebook
							</a>
							<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="facebookDropdown">
								<li><a class="dropdown-item" href="/account_fb">Facebook
										Accounts</a></li>
								<li><a class="dropdown-item" href="/pages">Pages</a></li>
								<li><a class="dropdown-item" href="/ad_accounts">Ads Accounts</a></li>
								<li><a class="dropdown-item" href="/campaign_fb/create">Create
										Campaign</a></li>
								<li><a class="dropdown-item" href="/campaign_fb/list">Facebook
										Campaigns</a></li>
								<li><a class="dropdown-item" href="/stack_posts">Stack Posts</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" target="_blank" href="/permissions">Facebook Permissions</a></li>
							</ul>
						</li>

						<!-- YouTube Dropdown -->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="youtubeDropdown" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								YouTube
							</a>
							<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="youtubeDropdown">
								<li><a class="dropdown-item" href="/download-url">Download</a></li>
								<li><a class="dropdown-item" href="/batch/playlist">YouTube
										Playlist</a></li>
								<li><a class="dropdown-item" href="/videos">Videos</a></li>
								<li><a class="dropdown-item" href="/video_splits">Video Splits</a></li>
							</ul>
						</li>

						<!-- Legal Dropdown -->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="legalDropdown" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Legal
							</a>
							<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="legalDropdown">
								<li><a class="dropdown-item" target="_blank" href="/polices">Privacy
										Policy</a></li>
								<li><a class="dropdown-item" target="_blank" href="/permissions">Permissions</a></li>
							</ul>
						</li>

						<!-- Authentication -->
						{% if session.get('facebook_user_id') %}
						<li class="nav-item">
							<a class="nav-link" href="{{ url_for('auth.logout') }}">Logout</a>
						</li>
						{% else %}
						<li class="nav-item">
							<a class="nav-link" href="{{ url_for('auth.login') }}">Login</a>
						</li>
						{% endif %}
					</ul>
				</div>
			</nav>
		</header>

		<!-- jQuery first (optional, but recommended for better compatibility) -->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

		<!-- Popper.js -->
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>

		<!-- Bootstrap JS -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

		<!-- Script để xử lý dropdown -->
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				// Xử lý dropdown trên mobile
				var dropdowns = document.querySelectorAll('.dropdown-toggle');
				dropdowns.forEach(function (dropdown) {
					dropdown.addEventListener('click', function (e) {
						if (window.innerWidth < 992) {
							e.preventDefault();
							var menu = this.nextElementSibling;
							menu.classList.toggle('show');
						}
					});
				});

				// Xử lý hover trên desktop
				if (window.innerWidth >= 992) {
					var dropdownItems = document.querySelectorAll('.dropdown');
					dropdownItems.forEach(function (item) {
						item.addEventListener('mouseover', function () {
							this.querySelector('.dropdown-menu').classList.add('show');
						});
						item.addEventListener('mouseleave', function () {
							this.querySelector('.dropdown-menu').classList.remove('show');
						});
					});
				}
			});
		</script>
	</body>
</html>