{% extends "base.html" %}

{% block title %}Posts of {{ page.name }}{% endblock %}

{% block extra_css %}
<style>
	.table td,
	.table th {
		vertical-align: middle;
	}

	/* Căn lề trái cho các cột Title và Name */
	.text-left {
		text-align: left !important;
	}

	/* Responsive: Đảm bảo bảng có thể cuộn ngang trên các màn hình nhỏ */
	@media (max-width: 768px) {
		.table-responsive {
			overflow-x: auto;
		}

		h1 {
			font-size: 22px;
			text-align: center;
		}

		.table td,
		.table th {
			font-size: 14px;
			padding: 8px;
			white-space: nowrap;
		}
	}

	@media (max-width: 576px) {
		h1 {
			font-size: 20px;
			text-align: center;
		}

		.table td,
		.table th {
			font-size: 12px;
			padding: 6px;
		}
	}
</style>
{% endblock %}

{% block content %}
<h1 class="mb-4">Posts of {{ page.name }}</h1>
<div class="table-responsive">
	<table class="table table-striped table-bordered table-hover">
		<thead class="table-dark">
			<tr>
				<th class="text-left">Title</th>
				<th>Reactions</th>
				<th>Comments</th>
				<th>Created Time</th>
			</tr>
		</thead>
		<tbody>
			{% if posts|length == 0 %}
			<tr>
				<td colspan="5" class="text-center">No posts available for this page.</td>
			</tr>
			{% else %}
			{% for post in posts %}
			<tr>
				<td class="text-left">{{ post.message if post.message else 'No content' }}</td>
				<td>{{ post.reactions.summary.total_count if post.reactions else 0 }}</td>
				<td>{{ post.comments.summary.total_count if post.comments else 0 }}</td>
				<td>{{ post.created_time }}</td>
			</tr>
			{% endfor %}
			{% endif %}
		</tbody>
	</table>
</div>
{% endblock %}

{% block extra_js %}
<script>
	document.addEventListener('DOMContentLoaded', function () {
		console.log("Posts page loaded successfully");
	});
</script>
{% endblock %}