<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Video Splits</title>
				<link rel="icon" type="image/svg+xml"
					href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%234267B2'/><text x='50%' y='70%' font-size='70' fill='white' text-anchor='middle' font-family='Arial'>{{ app_name[0]|upper }}</text></svg>">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
		<!-- Add Font Awesome -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	</head>
	<body>
		{% include 'header.html' %}
		{% include 'message.html' %}
		<div class="container mt-5">
			<h1 class="text-center mb-4">Video Split List</h1>

			<!-- Form to select page and video -->
			<form method="POST" action="{{ url_for('video_split.add_to_schedule') }}">
				{{ form.csrf_token }} <!-- CSRF token -->
				<!-- Dropdown to select page -->
				<div class="mb-3">
					<label for="page_select" class="form-label">Select Page</label>
					<select id="page_select" name="page_id" class="form-select">
						<!-- Replace {{ pages }} with your list of pages -->
						{% for page in pages %}
						<option value="{{ page.page_id }}">{{ page.name }}</option>
						{% endfor %}
					</select>
				</div>

				<!-- Table displaying video splits -->
				<table class="table table-bordered table-striped">
					<thead class="table-light">
						<tr>
							<th><input type="checkbox" id="select_all"> All</th> <!-- Checkbox to select all -->
							<th>ID</th>
							<th>Title</th>
							<th>Duration (seconds)</th>
						</tr>
					</thead>
					<tbody>
						{% for split in video_splits %}
						<tr>
							<td>
								<input type="checkbox" name="selected_splits" value="{{ split.id }}">
							</td>
							<td>{{ split.id }}</td>
							<td>{{ split.title }}</td>
							<td>{{ split.duration }}</td>
						</tr>
						{% else %}
						<tr>
							<td colspan="4" class="text-center">No video splits available.</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>

				<!-- Button to submit the form -->
				<button type="submit" class="btn btn-primary">Add to Release Schedule</button>
			</form>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-OgVRvuATP1z7JjHLkuOU63t63E9UK9R1DlmAy1UoZlZpkjr/ZpZqgs3bzAv29ZjX"
			crossorigin="anonymous"></script>
		<script>
			// JavaScript to select/deselect all checkboxes
			document.getElementById('select_all').addEventListener('click', function (e) {
				const checkboxes = document.querySelectorAll('input[name="selected_splits"]');
				checkboxes.forEach(checkbox => {
					checkbox.checked = e.target.checked;
				});
			});
		</script>
	</body>
</html>